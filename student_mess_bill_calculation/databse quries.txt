CREATE DATABASE IF NOT EXISTS student_expense_db1;
USE student_expense_db1;


CREATE TABLE IF NOT EXISTS student (
    st_id INT primary KEY,
    name VARCHAR(100),
    abranch VARCHAR(50),
    phone VARCHAR(20)
);


SELECT * FROM student;


CREATE TABLE IF NOT EXISTS expense (
    expense_id INT AUTO_INCREMENT PRIMARY KEY,
    expense_month VARCHAR(50),
    total_expense FLOAT
);


CREATE TABLE IF NOT EXISTS attendance (
    att_id INT AUTO_INCREMENT PRIMARY KEY,
    student_id INT,
    month_name VARCHAR(50),
    days_present INT,
    UNIQUE(student_id, month_name),
    FOREIGN KEY (student_id) REFERENCES student(st_id) ON DELETE CASCADE
);


CREATE TABLE IF NOT EXISTS student_expense (
    se_id INT AUTO_INCREMENT PRIMARY KEY,
    student_id INT,
    expense_id INT,
    student_month_expense FLOAT,
    month_name VARCHAR(50),
    FOREIGN KEY (student_id) REFERENCES student(st_id) ON DELETE CASCADE,
    FOREIGN KEY (expense_id) REFERENCES expense(expense_id) ON DELETE CASCADE
);

CREATE TABLE admin (
    admin_id VARCHAR(50) PRIMARY KEY,
    password VARCHAR(100) NOT NULL
);

drop table admin;
select * from admin;

CREATE TABLE admin (
    admin_id VARCHAR(50) PRIMARY KEY,
    password VARCHAR(255) NOT NULL,
    email VARCHAR(100) UNIQUE NOT NULL
);
select * from admin;
ALTER TABLE admin MODIFY email VARCHAR(255) DEFAULT NULL;
select * from admin;
drop table admin;
CREATE TABLE admin (
    admin_id VARCHAR(100) PRIMARY KEY,
    password TEXT NOT NULL,
    email VARCHAR(255) NOT NULL UNIQUE
);
select * from admin;

use student_expense_db1;
use student_expense_db1;
select * from student;
select * from attendance;	
select * from expense;
	

